{
    "collab_server" : "",
    "contents" : "# script by Richie Hodel (richiehodel@gmail.com) #\n\n# This script takes as input environmental layers (e.g., Bioclim layers)\n# that are either .bil or .asc format.  It stacks and trims all layers\n# to the same spatial extent and tests for correlation between layers.\n# The output of this script is enivronmental layers in .asc format and\n# two .csv files that indicate which layers are correlated with one another.\n\n\n#install packages (only do it once)\ninstall.packages(\"maptools\")\ninstall.packages(\"raster\")\ninstall.packages(\"rgdal\")\ninstall.packages(\"sp\")\ninstall.packages(\"maps\")\ninstall.packages(\"mapproj\")\ninstall.packages(\"dismo\")\ninstall.packages(\"shapefiles\")\n\n#load the libraries\nlibrary(maptools)\nlibrary(raster)\nlibrary(rgdal)\nlibrary(sp)\nlibrary(maps)\nlibrary(mapproj)\nlibrary(dismo)\nlibrary(shapefiles)\n\n\n#set the working directory\nsetwd(\"/Users/richiehodel/Desktop/Amborella_ENM/bioclim_30s/\")\n\nbio_1 <- raster(\"bio1-9_30s_bil/bio_1.bil\")\nbio_2 <- raster(\"bio1-9_30s_bil/bio_2.bil\")\nbio_3 <- raster(\"bio1-9_30s_bil/bio_3.bil\")\nbio_4 <- raster(\"bio1-9_30s_bil/bio_4.bil\")\nbio_5 <- raster(\"bio1-9_30s_bil/bio_5.bil\")\nbio_6 <- raster(\"bio1-9_30s_bil/bio_6.bil\")\nbio_7 <- raster(\"bio1-9_30s_bil/bio_7.bil\")\nbio_8 <- raster(\"bio1-9_30s_bil/bio_8.bil\")\nbio_9 <- raster(\"bio1-9_30s_bil/bio_9.bil\")\nbio_10 <- raster(\"bio10-19_30s_bil/bio_10.bil\")\nbio_11 <- raster(\"bio10-19_30s_bil/bio_11.bil\")\nbio_12 <- raster(\"bio10-19_30s_bil/bio_12.bil\")\nbio_13 <- raster(\"bio10-19_30s_bil/bio_13.bil\")\nbio_14 <- raster(\"bio10-19_30s_bil/bio_14.bil\")\nbio_15 <- raster(\"bio10-19_30s_bil/bio_15.bil\")\nbio_16 <- raster(\"bio10-19_30s_bil/bio_16.bil\")\nbio_17 <- raster(\"bio10-19_30s_bil/bio_17.bil\")\nbio_18 <- raster(\"bio10-19_30s_bil/bio_18.bil\")\nbio_19 <- raster(\"bio10-19_30s_bil/bio_19.bil\")\n\nsetwd(\"/Users/richiehodel/Desktop/Amborella_ENM/PresLayers/\")\nalt <- raster(\"srtm_1km.asc\")\n\nbio_1\n\n# richie--here show the projection info for bio_1\n\n#make sure all layers are projected into the same datum\n\nprojection(alt) <- \"+proj=longlat +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +no_defs\" \n\n# trim layers to extent appropriate for New Caledonia\nclipper <- extent(162.7, 168.8, -23, -19)\na\nalt_clip <- crop(alt, clipper)\nclipped_1 <- crop(bio_1, clipper)\n\nextent(alt_clip) <- extent(clipped_1)\n\nclipped_2 <- crop(bio_2, clipper)\nclipped_3 <- crop(bio_3, clipper)\nclipped_4 <- crop(bio_4, clipper)\nclipped_5 <- crop(bio_5, clipper)\nclipped_6 <- crop(bio_6, clipper)\nclipped_7 <- crop(bio_7, clipper)\nclipped_8 <- crop(bio_8, clipper)\nclipped_9 <- crop(bio_9, clipper)\nclipped_10 <- crop(bio_10, clipper)\nclipped_11 <- crop(bio_11, clipper)\nclipped_12 <- crop(bio_12, clipper)\nclipped_13 <- crop(bio_13, clipper)\nclipped_14 <- crop(bio_14, clipper)\nclipped_15 <- crop(bio_15, clipper)\nclipped_16 <- crop(bio_16, clipper)\nclipped_17 <- crop(bio_17, clipper)\nclipped_18 <- crop(bio_18, clipper)\nclipped_19 <- crop(bio_19, clipper)\n\n\nwriteRaster(alt_clip, \"alt.asc\", format=\"ascii\")\n\nwriteRaster(clipped_1, \"bio1.asc\", format=\"ascii\")\nwriteRaster(clipped_2, \"bio2.asc\", format=\"ascii\")\nwriteRaster(clipped_3, \"bio3.asc\", format=\"ascii\")\nwriteRaster(clipped_4, \"bio4.asc\", format=\"ascii\")\nwriteRaster(clipped_5, \"bio5.asc\", format=\"ascii\")\nwriteRaster(clipped_6, \"bio6.asc\", format=\"ascii\")\nwriteRaster(clipped_7, \"bio7.asc\", format=\"ascii\")\nwriteRaster(clipped_8, \"bio8.asc\", format=\"ascii\")\nwriteRaster(clipped_9, \"bio9.asc\", format=\"ascii\")\nwriteRaster(clipped_10, \"bio10.asc\", format=\"ascii\")\nwriteRaster(clipped_11, \"bio11.asc\", format=\"ascii\")\nwriteRaster(clipped_12, \"bio12.asc\", format=\"ascii\")\nwriteRaster(clipped_13, \"bio13.asc\", format=\"ascii\")\nwriteRaster(clipped_14, \"bio14.asc\", format=\"ascii\")\nwriteRaster(clipped_15, \"bio15.asc\", format=\"ascii\")\nwriteRaster(clipped_16, \"bio16.asc\", format=\"ascii\")\nwriteRaster(clipped_17, \"bio17.asc\", format=\"ascii\")\nwriteRaster(clipped_18, \"bio18.asc\", format=\"ascii\")\nwriteRaster(clipped_19, \"bio19.asc\", format=\"ascii\")\n\n\n#####       correlation check for Bioclim variables      #######\n\nstacker <- stack(clipped_1, clipped_2, clipped_3, clipped_4, clipped_5,\n               clipped_6, clipped_7, clipped_8, clipped_9, clipped_10,\n               clipped_11, clipped_12, clipped_13, clipped_14, clipped_15,\n               clipped_16, clipped_17, clipped_18, clipped_19)\ncorr <- layerStats(stacker, 'pearson', na.rm=TRUE)\nc <- corr$`pearson correlation coefficient`\nwrite.csv(c, \"correlationBioclim.csv\")\n\n# now get other layers\n\n#soil from harmonized world soil database\nsoil <- raster(\"hwsd.bil\")\n\nsoil_clip <- crop(soil, clipper)\nwriteRaster(soil_clip, \"soil.asc\", format=\"ascii\")\n\naspect_u <- raster(\"GloAspectClU_30as.asc\")\naspect_u_clip <- crop(aspect_u, clipper)\nwriteRaster(aspect_u_clip, \"Aspect_u_clip.asc\", format=\"ascii\")\n\naspect_e <- raster(\"GloAspectClE_30as.asc\")\naspect_e_clip <- crop(aspect_e, clipper)\nwriteRaster(aspect_e_clip, \"Aspect_e_clip.asc\", format=\"ascii\")\n\naspect_n <- raster(\"GloAspectClN_30as.asc\")\naspect_n_clip <- crop(aspect_n, clipper)\nwriteRaster(aspect_n_clip, \"Aspect_n_clip.asc\", format=\"ascii\")\n\naspect_s <- raster(\"GloAspectClS_30as.asc\")\naspect_s_clip <- crop(aspect_s, clipper)\nwriteRaster(aspect_s_clip, \"Aspect_s_clip.asc\", format=\"ascii\")\n\naspect_w <- raster(\"GloAspectClW_30as.asc\")\naspect_w_clip <- crop(aspect_w, clipper)\nwriteRaster(aspect_w_clip, \"Aspect_w_clip.asc\", format=\"ascii\")\n\n# aspect files will be kept separate for ENM\n\nclass_1 <- raster(\"GloSlopesCl1_30as.asc\")\nclass_2 <- raster(\"GloSlopesCl1_30as.asc\")\nclass_3 <- raster(\"GloSlopesCl1_30as.asc\")\nclass_4 <- raster(\"GloSlopesCl1_30as.asc\")\nclass_5 <- raster(\"GloSlopesCl1_30as.asc\")\nclass_6 <- raster(\"GloSlopesCl1_30as.asc\")\nclass_7 <- raster(\"GloSlopesCl1_30as.asc\")\nclass_8 <- raster(\"GloSlopesCl1_30as.asc\")\n\nclass_1_clip <- crop(class_1, clipper)\nclass_2_clip <- crop(class_2, clipper)\nclass_3_clip <- crop(class_3, clipper)\nclass_4_clip <- crop(class_4, clipper)\nclass_5_clip <- crop(class_5, clipper)\nclass_6_clip <- crop(class_6, clipper)\nclass_7_clip <- crop(class_7, clipper)\nclass_8_clip <- crop(class_8, clipper)\n\nclass_all <- 0.25*class_1_clip + 1.25*class_2_clip + 3.5*class_3_clip +\n  7.5*class_4_clip + 12.5*class_5_clip + 22.5*class_6_clip + 37.5*class_7_clip + \n  72.5*class_8_clip\nclass_all <- 10*class_all\nwriteRaster(class_all, \"class_all.asc\", format=\"ascii\")\n\n\n########\n# import trimmed individual direction aspect files\n########\n\naspect_w_clip <- raster(\"Aspect_w_clip.asc\")\naspect_e_clip <- raster(\"Aspect_e_clip.asc\")\naspect_n_clip <- raster(\"Aspect_n_clip.asc\")\naspect_s_clip <- raster(\"Aspect_s_clip.asc\")\n\n\n#correlation check\nstacker <- stack(aspect_w_clip, aspect_n_clip, aspect_e_clip, aspect_s_clip)\ncorr <- layerStats(stacker, 'pearson', na.rm=TRUE)\nc <- corr$`pearson correlation coefficient`\nwrite.csv(c, \"correlation_aspect.csv\")\n\n\n",
    "created" : 1518018133247.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "1633940062",
    "id" : "A9FD234",
    "lastKnownWriteTime" : 1518026505,
    "last_content_update" : 1518026505951,
    "path" : "~/Desktop/Amborella_ENM/Climate.R",
    "project_path" : "Climate.R",
    "properties" : {
    },
    "relative_order" : 2,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}